<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Topic 10-building-and-testing.md - awesome API documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
   <script>
     function show_extra(id) {
        var cur = document.getElementById("item"+id).className

        if (cur == "hide_extra") {
            document.getElementById("item"+id).className = "show_more"
            document.getElementById("button"+id).className = "hide_extra"
        }
     }
   </script>

</head>
<body>

<div id="container">
<div id="main">





<!-- Menu -->

<div id="navigation">
<h1>awesome</h1>

<div class="select">
    <select name="theme" id="theme-select">
       <option selected disabled>Choose a theme</option>
       <option value="light">LDoc Light</option>
       <option value="dark">Awesome Dark</option>
       <option value="monokai">Monokai</option>
       <option value="onedark">One Dark</option>
    </select>
 </div>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Dependencies">Dependencies </a></li>
<li><a href="#Building">Building </a></li>
<li><a href="#Testing">Testing </a></li>
</ul>


<h2>Documentation</h2>
<ul class="nowrap">
  <li><a href="../documentation/00-authors.md.html">Authors</a></li>
  <li><a href="../documentation/01-readme.md.html">Readme</a></li>
  <li><a href="../documentation/02-contributing.md.html">Contributing</a></li>
  <li><a href="../documentation/03-declarative-layout.md.html">The Widget system</a></li>
  <li><a href="../documentation/04-new-widgets.md.html">Creating new widget</a></li>
  <li><a href="../documentation/05-awesomerc.md.html">Default configuration file documentation</a></li>
  <li><a href="../documentation/06-appearance.md.html">Change Awesome appearance</a></li>
  <li><a href="../documentation/07-my-first-awesome.md.html">My first Awesome</a></li>
  <li><a href="../documentation/08-client-layout-system.md.html">The AwesomeWM client layout system</a></li>
  <li><a href="../documentation/09-options.md.html">Startup options</a></li>
  <li><strong>Building and Testing</strong></li>
  <li><a href="../documentation/16-using-cairo.md.html">Using Cairo and LGI</a></li>
  <li><a href="../documentation/17-porting-tips.md.html">Tips for upgrading your configuration</a></li>
  <li><a href="../documentation/89-NEWS.md.html">NEWS</a></li>
  <li><a href="../documentation/90-FAQ.md.html">FAQ</a></li>
</ul>
<h2>Core components</h2>
<ul class="nowrap">
  <li><a href="../core_components/awesome.html">awesome</a></li>
  <li><a href="../core_components/awful.keygrabber.html">awful.keygrabber</a></li>
  <li><a href="../core_components/client.html">client<span class='listplusign'> and awful.client</span></a></li>
  <li><a href="../core_components/drawable.html">drawable</a></li>
  <li><a href="../core_components/gears.timer.html">gears.timer</a></li>
  <li><a href="../core_components/mousegrabber.html">mousegrabber</a></li>
  <li><a href="../core_components/naughty.action.html">naughty.action</a></li>
  <li><a href="../core_components/naughty.notification.html">naughty.notification</a></li>
  <li><a href="../core_components/root.html">root</a></li>
  <li><a href="../core_components/screen.html">screen<span class='listplusign'> and awful.screen</span></a></li>
  <li><a href="../core_components/tag.html">tag<span class='listplusign'> and awful.tag</span></a></li>
</ul>
<h2>Input handling</h2>
<ul class="nowrap">
  <li><a href="../input_handling/awful.button.html">awful.button</a></li>
  <li><a href="../input_handling/awful.key.html">awful.key</a></li>
  <li><a href="../input_handling/awful.keyboard.html">awful.keyboard</a></li>
  <li><a href="../input_handling/mouse.html">mouse</a></li>
</ul>
<h2>Declarative rules</h2>
<ul class="nowrap">
  <li><a href="../declarative_rules/ruled.client.html">ruled.client</a></li>
  <li><a href="../declarative_rules/ruled.notifications.html">ruled.notifications</a></li>
</ul>
<h2>Widgets</h2>
<ul class="nowrap">
  <li><a href="../widgets/awful.widget.button.html">awful.widget.button</a></li>
  <li><a href="../widgets/awful.widget.clienticon.html">awful.widget.clienticon</a></li>
  <li><a href="../widgets/awful.widget.keyboardlayout.html">awful.widget.keyboardlayout</a></li>
  <li><a href="../widgets/awful.widget.launcher.html">awful.widget.launcher</a></li>
  <li><a href="../widgets/awful.widget.layoutbox.html">awful.widget.layoutbox</a></li>
  <li><a href="../widgets/awful.widget.layoutlist.html">awful.widget.layoutlist</a></li>
  <li><a href="../widgets/awful.widget.prompt.html">awful.widget.prompt</a></li>
  <li><a href="../widgets/awful.widget.taglist.html">awful.widget.taglist</a></li>
  <li><a href="../widgets/awful.widget.tasklist.html">awful.widget.tasklist</a></li>
  <li><a href="../widgets/awful.widget.watch.html">awful.widget.watch</a></li>
  <li><a href="../widgets/naughty.list.actions.html">naughty.list.actions</a></li>
  <li><a href="../widgets/naughty.list.notifications.html">naughty.list.notifications</a></li>
  <li><a href="../widgets/naughty.widget.icon.html">naughty.widget.icon</a></li>
  <li><a href="../widgets/naughty.widget.message.html">naughty.widget.message</a></li>
  <li><a href="../widgets/naughty.widget.title.html">naughty.widget.title</a></li>
  <li><a href="../widgets/wibox.widget.calendar.html">wibox.widget.calendar</a></li>
  <li><a href="../widgets/wibox.widget.checkbox.html">wibox.widget.checkbox</a></li>
  <li><a href="../widgets/wibox.widget.graph.html">wibox.widget.graph</a></li>
  <li><a href="../widgets/wibox.widget.imagebox.html">wibox.widget.imagebox</a></li>
  <li><a href="../widgets/wibox.widget.piechart.html">wibox.widget.piechart</a></li>
  <li><a href="../widgets/wibox.widget.progressbar.html">wibox.widget.progressbar</a></li>
  <li><a href="../widgets/wibox.widget.separator.html">wibox.widget.separator</a></li>
  <li><a href="../widgets/wibox.widget.slider.html">wibox.widget.slider</a></li>
  <li><a href="../widgets/wibox.widget.systray.html">wibox.widget.systray</a></li>
  <li><a href="../widgets/wibox.widget.textbox.html">wibox.widget.textbox</a></li>
  <li><a href="../widgets/wibox.widget.textclock.html">wibox.widget.textclock</a></li>
</ul>
<h2>Widget containers</h2>
<ul class="nowrap">
  <li><a href="../widget_containers/awful.widget.only_on_screen.html">awful.widget.only_on_screen</a></li>
  <li><a href="../widget_containers/naughty.widget.background.html">naughty.widget.background</a></li>
  <li><a href="../widget_containers/wibox.container.arcchart.html">wibox.container.arcchart</a></li>
  <li><a href="../widget_containers/wibox.container.background.html">wibox.container.background</a></li>
  <li><a href="../widget_containers/wibox.container.constraint.html">wibox.container.constraint</a></li>
  <li><a href="../widget_containers/wibox.container.margin.html">wibox.container.margin</a></li>
  <li><a href="../widget_containers/wibox.container.mirror.html">wibox.container.mirror</a></li>
  <li><a href="../widget_containers/wibox.container.place.html">wibox.container.place</a></li>
  <li><a href="../widget_containers/wibox.container.radialprogressbar.html">wibox.container.radialprogressbar</a></li>
  <li><a href="../widget_containers/wibox.container.rotate.html">wibox.container.rotate</a></li>
  <li><a href="../widget_containers/wibox.container.scroll.html">wibox.container.scroll</a></li>
  <li><a href="../widget_containers/wibox.container.tile.html">wibox.container.tile</a></li>
</ul>
<h2>Widget layouts</h2>
<ul class="nowrap">
  <li><a href="../widget_layouts/wibox.layout.align.html">wibox.layout.align</a></li>
  <li><a href="../widget_layouts/wibox.layout.fixed.html">wibox.layout.fixed</a></li>
  <li><a href="../widget_layouts/wibox.layout.flex.html">wibox.layout.flex</a></li>
  <li><a href="../widget_layouts/wibox.layout.grid.html">wibox.layout.grid</a></li>
  <li><a href="../widget_layouts/wibox.layout.manual.html">wibox.layout.manual</a></li>
  <li><a href="../widget_layouts/wibox.layout.ratio.html">wibox.layout.ratio</a></li>
  <li><a href="../widget_layouts/wibox.layout.stack.html">wibox.layout.stack</a></li>
</ul>
<h2>Popups and bars</h2>
<ul class="nowrap">
  <li><a href="../popups_and_bars/awful.hotkeys_popup.widget.html">awful.hotkeys_popup.widget</a></li>
  <li><a href="../popups_and_bars/awful.menu.html">awful.menu</a></li>
  <li><a href="../popups_and_bars/awful.popup.html">awful.popup</a></li>
  <li><a href="../popups_and_bars/awful.titlebar.html">awful.titlebar</a></li>
  <li><a href="../popups_and_bars/awful.tooltip.html">awful.tooltip</a></li>
  <li><a href="../popups_and_bars/awful.wallpaper.html">awful.wallpaper</a></li>
  <li><a href="../popups_and_bars/awful.wibar.html">awful.wibar</a></li>
  <li><a href="../popups_and_bars/awful.widget.calendar_popup.html">awful.widget.calendar_popup</a></li>
  <li><a href="../popups_and_bars/menubar.html">menubar</a></li>
  <li><a href="../popups_and_bars/naughty.layout.box.html">naughty.layout.box</a></li>
  <li><a href="../popups_and_bars/naughty.layout.legacy.html">naughty.layout.legacy</a></li>
  <li><a href="../popups_and_bars/wibox.html">wibox</a></li>
</ul>
<h2>Utility libraries</h2>
<ul class="nowrap">
  <li><a href="../utility_libraries/gears.debug.html">gears.debug</a></li>
  <li><a href="../utility_libraries/gears.filesystem.html">gears.filesystem</a></li>
  <li><a href="../utility_libraries/gears.geometry.html">gears.geometry</a></li>
  <li><a href="../utility_libraries/gears.math.html">gears.math</a></li>
  <li><a href="../utility_libraries/gears.object.html">gears.object</a></li>
  <li><a href="../utility_libraries/gears.protected_call.html">gears.protected_call</a></li>
  <li><a href="../utility_libraries/gears.sort.html">gears.sort</a></li>
  <li><a href="../utility_libraries/gears.string.html">gears.string</a></li>
  <li><a href="../utility_libraries/gears.table.html">gears.table</a></li>
  <li><a href="../utility_libraries/gears.wallpaper.html">gears.wallpaper</a></li>
</ul>
<h2>Theme related libraries</h2>
<ul class="nowrap">
  <li><a href="../theme_related_libraries/beautiful.html">beautiful</a></li>
  <li><a href="../theme_related_libraries/gears.color.html">gears.color</a></li>
  <li><a href="../theme_related_libraries/gears.shape.html">gears.shape</a></li>
</ul>
<h2>Libraries</h2>
<ul class="nowrap">
  <li><a href="../libraries/awful.completion.html">awful.completion</a></li>
  <li><a href="../libraries/awful.hotkeys_popup.html">awful.hotkeys_popup</a></li>
  <li><a href="../libraries/awful.layout.html">awful.layout</a></li>
  <li><a href="../libraries/awful.permissions.html">awful.permissions</a></li>
  <li><a href="../libraries/awful.placement.html">awful.placement</a></li>
  <li><a href="../libraries/awful.prompt.html">awful.prompt</a></li>
  <li><a href="../libraries/awful.rules.html">awful.rules</a></li>
  <li><a href="../libraries/awful.spawn.html">awful.spawn</a></li>
  <li><a href="../libraries/awful.util.html">awful.util</a></li>
  <li><a href="../libraries/dbus.html">dbus</a></li>
  <li><a href="../libraries/gears.matcher.html">gears.matcher</a></li>
  <li><a href="../libraries/gears.surface.html">gears.surface</a></li>
  <li><a href="../libraries/menubar.menu_gen.html">menubar.menu_gen</a></li>
  <li><a href="../libraries/menubar.utils.html">menubar.utils</a></li>
  <li><a href="../libraries/naughty.html">naughty</a></li>
  <li><a href="../libraries/selection.html">selection</a></li>
  <li><a href="../libraries/wibox.widget.html">wibox.widget</a></li>
</ul>
<h2>Sample files</h2>
<ul class="nowrap">
  <li><a href="../sample files/rc.lua.html">rc.lua</a></li>
  <li><a href="../sample files/theme.lua.html">theme.lua</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/awful.screenshot.html">awful.screenshot</a></li>
  <li><a href="../classes/awful.widget.common.html">awful.widget.common</a></li>
  <li><a href="../classes/gears.cache.html">gears.cache</a></li>
  <li><a href="../classes/gears.matrix.html">gears.matrix</a></li>
  <li><a href="../classes/menubar.icon_theme.html">menubar.icon_theme</a></li>
  <li><a href="../classes/menubar.index_theme.html">menubar.index_theme</a></li>
  <li><a href="../classes/wibox.hierarchy.html">wibox.hierarchy</a></li>
  <li><a href="../classes/wibox.widget.base.html">wibox.widget.base</a></li>
  <li><a href="../classes/xproperties.html">xproperties</a></li>
</ul>

</div>

<div id="content">


<h1>Building and Testing</h1>

<p><a name="Dependencies"></a></p>
<h2>Dependencies</h2>

<p>Awesome has the following dependencies (besides a more-or-less standard POSIX
environment):</p>

<ul>
    <li><a href="https://cmake.org">CMake >= 3.0.0</a></li>
    <li><a href="https://www.lua.org">Lua >= 5.1.0</a> or <a href="https://luajit.org">LuaJIT</a></li>
    <li><a href="https://github.com/pavouk/lgi">LGI >= 0.8.0</a></li>
    <li><a href="https://www.x.org/archive//individual/proto/">xproto >= 7.0.15</a></li>
    <li><a href="https://xcb.freedesktop.org/">libxcb >= 1.6</a> with support for the RandR, XTest, Xinerama, SHAPE and
    XKB extensions</li>
    <li><a href="https://xcb.freedesktop.org/">libxcb-cursor</a></li>
    <li><a href="https://xcb.freedesktop.org/">libxcb-util >= 0.3.8</a></li>
    <li><a href="https://xcb.freedesktop.org/">libxcb-keysyms >= 0.3.4</a></li>
    <li><a href="https://xcb.freedesktop.org/">libxcb-icccm >= 0.3.8</a></li>
    <li><a href="https://xcb.freedesktop.org/">libxcb-xfixes</a></li>
    <li><a href="https://github.com/Airblader/xcb-util-xrm">xcb-util-xrm >= 1.0</a></li>
    <li><a href="http://xkbcommon.org/">libxkbcommon</a> with X11 support enabled</li>
    <li><a href="https://www.freedesktop.org/wiki/Software/startup-notification/">libstartup-notification >=
    0.10</a></li>
    <li><a href="https://www.cairographics.org/">cairo</a> with support for XCB and GObject
    introspection</li>
    <li><a href="http://www.pango.org/">Pango</a> with support for Cairo and GObject
    introspection</li>
    <li><a href="https://wiki.gnome.org/Projects/GLib">GLib >= 2.40</a> with support for GObject
    introspection</li>
    <li><a href="https://developer.gnome.org/gio/stable/">GIO</a> with support for GObject
    introspection</li>
    <li><a href="https://wiki.gnome.org/Projects/GdkPixbuf">GdkPixbuf</a></li>
    <li>libX11 with xcb support</li>
    <li><a href="https://www.imagemagick.org/script/index.php">Imagemagick's convert utility</a></li>
    <li><a href="https://github.com/devnev/libxdg-basedir">libxdg-basedir >= 1.0.0</a></li>
</ul>

<p>Additionally, the following optional dependencies exist:</p>

<ul>
    <li><a href="https://www.freedesktop.org/wiki/Software/dbus/">DBus</a> for DBus integration
    and the <code>awesome-client</code> utility</li>
    <li><a href="https://asciidoctor.org/">asciidoctor</a> for generating man pages</li>
    <li><a href="http://www.gzip.org/">gzip</a> for compressing man pages</li>
    <li><a href="https://stevedonovan.github.io/ldoc/">ldoc >= 1.4.5</a> for generating the
    documentation</li>
    <li><a href="https://olivinelabs.com/busted/">busted</a> for running unit tests</li>
    <li><a href="https://github.com/mpeterv/luacheck">luacheck</a> for static code analysis</li>
    <li><a href="https://keplerproject.github.io/luacov/">LuaCov</a> for collecting code coverage
    information</li>
    <li>libexecinfo on systems where libc does not provide <code>backtrace_symbols()</code> to
    generate slightly better backtraces on crashes</li>
    <li><code>Xephyr</code> or <code>Xvfb</code> for running integration tests</li>
    <li><a href="https://www.gtk.org/">GTK+ >= 3.10</a> for <code>./themes/gtk/</code></li>
    <li><a href="https://gitlab.freedesktop.org/xorg/lib/libxcb-errors">xcb-errors</a> for
    pretty-printing of X11 errors</li>
    <li><a href="https://wiki.gnome.org/action/show/Projects/LibRsvg">libRSVG</a> for displaying
    SVG files without scaling artifacts</li>
    <li><a href="http://tripie.sweb.cz/utils/wmctrl">wmctrl</a> for testing WM interactions
    with external actions</li>
    <li><a href="https://invisible-island.net/xterm/">xterm</a> for various test cases</li>
</ul>

<p><a name="Building"></a></p>
<h2>Building</h2>

<p>With all dependencies installed, run the following commands within the root of the repository to build and install Awesome on your system:</p>


<pre>make
sudo make install
</pre>


<h3>Create packages</h3>

<p>To ease installation management, you can pack Awesome into <code>.deb</code> or <code>.rpm</code> packages. The following command will build the correct package for your system's package manager:</p>


<pre>make <span class="global">package</span>
</pre>


<p>To install the package, run one of the following commands:</p>


<pre>sudo dpkg -i awesome-x.y.z.deb
# <span class="keyword">or</span>
sudo rpm -Uvh awesome-x.y.z.rpm
</pre>


<h3>Customizing build options</h3>

<p>Awesome allows customizing various aspects of the build process through CMake variables. To change these variables, pass the <code>CMAKE_ARGS</code> environment variable to <code>make</code> with CMake flags as content (see <code>cmake -h</code>).</p>

<p>Here is an example:</p>


<pre>CMAKE_ARGS=<span class="string">"-DLUA_EXECUTABLE=/usr/bin/lua5.3"</span> make
</pre>


<p><strong>Note:</strong></p>

<p>CMake arguments only need to be specified on the first run of <code>make</code> or after <code>make distclean</code>.</p>

<h4>Skip documentation</h4>

<p>The CMake variables <code>GENERATE_DOC</code> and <code>GENERATE_MANPAGES</code> toggle generation of HTML documentation and man pages respectively. They are enabled by default but can be set to <code>OFF</code>.</p>


<pre>CMAKE_ARGS=<span class="string">"-DGENERATE_DOC=OFF -DGENERATE_MANPAGES=OFF"</span> make
</pre>


<h4>Change the Lua version</h4>

<p>Both the build steps and the final binary require a working Lua interpreter. To change the Lua interpreter that both the build process and Awesome should use, specify an absolute path to a <code>lua</code> binary for <code>LUA_EXECUTABLE</code> and values that match the binary's version for <code>LUA_LIBRARY</code> and <code>LUA_INCLUDE_DIR</code>.</p>

<p>Example to build on Arch Linux:</p>


<pre>CMAKE_ARGS=<span class="string">"-DLUA_EXECUTABLE=/usr/bin/lua5.3 -DLUA_LIBRARY=/usr/lib/liblua.so.5.3 -DLUA_INCLUDE_DIR=/usr/include/lua5.3"</span> make
</pre>


<h4>Additional options</h4>

<p>Additional variables can be found through CMake. Run the following command to print a list of all available variables, including the ones explained above:</p>


<pre>cmake -B build -L
</pre>


<p><a name="Testing"></a></p>
<h2>Testing</h2>

<p>Once Awesome has been built, you can run various test suites to verify functionality for both the binary and the Lua library. Make sure to install applicable dependencies as outlined at the top.</p>

<p><strong>Full test suite:</strong></p>


<pre>make check
</pre>


<p>Individual test categories can be run as well:</p>

<ul>
    <li><code>make check-integration</code>: Run integration tests within a Xephyr session.</li>
    <li><code>make check-qa</code>: Run <code>luacheck</code> against the Lua library</li>
    <li><code>make check-unit</code>: Run unit tests with <code>busted</code> against the Lua library. You can also run <code>busted &lt;options&gt; ./spec</code> if you want to specify options for <code>busted</code>.</li>
    <li><code>make check-requires</code>: Check for invalid <code>require()</code> calls.</li>
    <li><code>make check-examples</code>: Run integration tests within the examples in <code>./tests/examples</code>.</li>
    <li><code>make check-themes</code>: Test themes.</li>
</ul>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="https://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->

<script defer type="text/javascript">
    // Theme selection and its local storage
    var select = document.getElementById("theme-select");

    var storedTheme = localStorage.getItem('theme') || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
    if (storedTheme) {
        select.value = storedTheme;
        document.documentElement.setAttribute('data-theme', storedTheme)
    }

    select.addEventListener("change", function() {
        var targetTheme = this.value;
        document.documentElement.setAttribute('data-theme', targetTheme)
        localStorage.setItem('theme', targetTheme);
    });

    const $nav = document.querySelector("#navigation");

    // When clicking the sidebar, open it
    $nav.addEventListener("click", function(ev) {
        if (document.body.clientWidth >= 768) {
            return;
        }

        const target = $nav;
        if (!target.classList.contains("open")) {
            target.classList.add("open");
            ev.stopPropagation();
        }
    });

    // When clicking anywhere else than the sidebar, close it
    document.querySelector("body").addEventListener("click", function(ev) {
        if (document.body.clientWidth >= 768 || ev.target.contains($nav)) {
            return;
        }

        const target = $nav;
        if (target.classList.contains("open")) {
            target.classList.remove("open");
        }
    });

    const copyResultClasses = {
        success : "copy-link--success",
        failure: "copy-link--failure"
    };

    const removeCopyResultClasses = ($target) =>
        Object.values(copyResultClasses).forEach(c => $target.classList.remove(c));

    document.querySelectorAll(".js-copy-link").forEach(copyLink => {
        copyLink.addEventListener("click", function(e) {
            e.preventDefault();
            const $target = e.target;

            removeCopyResultClasses($target);

            let link = $target.href;
            if (!link) {
                return;
            }
            if (link.startsWith("#")) {
                const curr = window.location.pathname;
                link = curr.substring(0, curr.indexOf("#")) + link;
            }

            // We need to create a fake element to copy the text from
            const fakeElement = document.createElement("textarea");
            fakeElement.value = link;
            document.body.appendChild(fakeElement);
            fakeElement.select();

            let success = false;
            try {
                success = document.execCommand("copy");
            } catch(err) {
                success = false;
            }

            fakeElement.remove();
            $target.classList.add(success ? copyResultClasses.success : copyResultClasses.failure);
            setInterval(() => removeCopyResultClasses($target), 1500);
        });
    });
</script>

</body>
</html>
